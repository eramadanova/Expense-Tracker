{% extends 'base.html'%}

{% block title%}Transactions{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Transactions</h2>
</div>
<!-- Transactions Table -->
<div class="table-responsive mt-4">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Placeholder for dynamic transactions -->
            <tr>
                <td>2024-12-29</td>
                <td>Food</td>
                <td>Lunch at restaurant</td>
                <td class="text-danger">-15.00</td>
                <td>
                    <button class="btn btn-sm btn-warning">Update</button>
                    <button class="btn btn-sm btn-danger">Delete</button>
                </td>
            </tr>
            <tr>
                <td>2024-12-28</td>
                <td>Salary</td>
                <td>Monthly salary</td>
                <td class="text-success">+2000.00</td>
                <td>
                    <button class="btn btn-sm btn-warning">Update</button>
                    <button class="btn btn-sm btn-danger">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

        <!-- Import Button -->
        <div class="d-flex justify-content-end mt-4">
            <button class="btn btn-primary" id="import_csv">Import from CSV</button>
        </div>
    </div>

    <!-- File Input for Import -->
    <input type="file" id="csv_file_input" accept=".csv" style="display: none;">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Highlight Amounts by Type
        document.querySelectorAll('tbody tr').forEach(row => {
            const amountCell = row.querySelector('td:nth-child(4)');
            const amount = parseFloat(amountCell.textContent);
            if (amount < 0) {
                amountCell.classList.add('text-danger');
            } else {
                amountCell.classList.add('text-success');
            }
        });


        // Import from CSV
        document.getElementById('importCsvBtn').addEventListener('click', () => {
            document.getElementById('csvFileInput').click();
        });

        document.getElementById('csvFileInput').addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const csvContent = e.target.result;
                    console.log('CSV Content:', csvContent);
                    alert('CSV imported successfully!');
                };
                reader.readAsText(file);
            }
        });
    </script>
</body>
</html>
{% endblock %}